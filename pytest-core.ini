[tool:pytest]
# Core test configuration - only stable, critical tests
minversion = 6.0
testpaths = 
    tests/test_agent_registry.py
    tests/tools_tests/test_utils.py

# Test selection - focus on working tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Markers for test categorization
markers =
    core: Core functionality tests that must always pass
    integration: Integration tests (may be unstable)
    legacy: Legacy tests for old architecture (skipped by default)
    slow: Tests that take longer than 5 seconds

# Skip legacy and integration tests by default in CI
addopts = 
    -v
    --strict-markers
    --strict-config
    --tb=short
    -m "not legacy and not integration"
    --cov=loan_processing.agents.providers.openai.agentregistry
    --cov=loan_processing.agents.shared
    --cov-report=term-missing
    --cov-fail-under=85

# Warnings configuration
filterwarnings =
    ignore::DeprecationWarning:pydantic.*
    ignore::PendingDeprecationWarning

# Timeouts
timeout = 300